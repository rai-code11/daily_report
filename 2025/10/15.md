## 取り組んだ課題一覧
- ECサイト_商品一覧ページ
- Herokuへデプロイ

## わかったこと
1) エラーの原因と対処（runtime.txt → .python-version）

エラー内容（要旨）

runtime.txt に Python-3.13.6 と書いていて形式が不正。

そもそも runtime.txt は非推奨、代わりに .python-version を使う。

.python-version には メジャー＋マイナーのみ（例: 3.13）を書く。

やること（手順）

```bash
# ① runtime.txt を削除
git rm runtime.txt

# ② .python-version を作成（拡張子なし / 先頭ドットあり）
printf "3.13\n" > .python-version
# 例: 3.12 を使いたいなら "3.12" と記載

# ③ 反映
git add .python-version
git commit -m "Use .python-version for Heroku Python runtime"
git push heroku main
```

ポイント

```text
.python-version には 3.13 のように書く。

NG例：Python-3.13.6 / "3.13" / 3.13.6

パッチ固定は非推奨（セキュリティ・パッチが自動で入らなくなるため）。
```

---

2) ログの見方（Webプロセスだけ見る）

基本（全体を追う）：

```bash
heroku logs --tail
```

Web　dyno（Webプロセス）に絞る：

```bash
heroku logs --tail --source app --dyno web
```

```text
--source app … アプリからのログ
--dyno web … Webダイノだけ（worker等は除外）
```

---

3) 静的ファイルのパス指定ミス（../../../static/... はNG）

問題点

テンプレート内で ../../../static/... といった相対パスを書くと、
URLの深さ（/a/b/ なのか /a/ なのか）で崩れます。

Django では テンプレートタグで解決します。

正しい書き方（テンプレート）

```django
{% load static %}

<!-- CSS -->
<link rel="stylesheet" href="{% static 'css/style.css' %}">

<!-- 画像 -->
<img src="{% static 'images/logo.png' %}" alt="logo">

<!-- JS -->
<script src="{% static 'js/app.js' %}"></script>
```

NG例（相対パス直書き）

```html
<!--  URL階層に依存して壊れる -->
<link rel="stylesheet" href="../../../static/css/style.css">
```

settings.py（要点）

```python
# base.py など共通設定
STATIC_URL = "/static/"

# 開発でプロジェクト内の静的ディレクトリを追加する場合
# (例) BASE_DIR / "static" を参照したいとき
from pathlib import Path
BASE_DIR = Path(__file__).resolve().parents[2]

STATICFILES_DIRS = [
    BASE_DIR / "static",  # プロジェクト直下の static/
]
```

本番（WhiteNoise + collectstatic）

```python
# production.py
MIDDLEWARE.insert(1, "whitenoise.middleware.WhiteNoiseMiddleware")

STORAGES = {
    "staticfiles": {
        "BACKEND": "whitenoise.storage.CompressedManifestStaticFilesStorage"
    },
    # MEDIA は Cloudinary 側で設定（別途）
}

STATIC_ROOT = BASE_DIR / "staticfiles"  # collectstatic 出力先
```

```bash
# 本番に静的ファイルをまとめる
python manage.py collectstatic --noinput
```

---

4) 画像（MEDIA）と静的（STATIC）の役割差も再確認

```text
STATIC：アプリ配布物（CSS/JS/ビルド済み画像/フォント等）
→ テンプレートは {% static %} を使う。

MEDIA：ユーザーアップロード

開発：MEDIA_ROOT へ保存し、urls.py の static() で配信（DEBUG=True時のみ）。

本番：Cloudinary（STORAGES['default']=MediaCloudinaryStorage）に切替。
```

開発での MEDIA 配信（urls.py）

```python
# config/urls.py
from django.conf import settings
from django.conf.urls.static import static

urlpatterns = [
    # ... 既存のURL ...
]

if settings.DEBUG:
    urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)
```


## 次やること
- 
- 


## 感じたこと
- 

## 学習時間
- 5.60h
