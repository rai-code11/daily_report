## 取り組んだ課題一覧  
-a  Udemy_米国AI開発者がゼロから教えるDocker講座_s67〜102

## わかったこと

### ■ Anacondaのインストール（対話形式）

- `sh Anaconda3-2019.10-Linux-x86_64.sh`
  - このコマンドでAnacondaのインストーラが起動する。
  - 画面の指示に従って、ライセンス確認・インストール先の指定などを行う。
  - 対話形式で進む。

---

### ■ パスを通すとは

- 環境変数`$PATH`にディレクトリを追加すると、その中にあるプログラムをコマンドとして実行できるようになる。
- **確認**：`echo $PATH`
- **追加**：`export PATH=/path/to/something:$PATH`
  - ※ `=` の前後にスペースを入れない！

---

### ■ shコマンドのオプション

- `sh -x Anaconda3-2024.10-1-Linux-aarch64.sh`
  - 実行中のコマンドを一行ずつ表示（デバッグ用）

- `sh Anaconda3-2024.10-1-Linux-aarch64.sh -b -p /opt/anaconda3`
  - `-b`：確認なしで自動インストール
  - `-p`：インストール先を指定（例：/opt/anaconda3）

---

### ■ which コマンドまとめ

- **概要**：コマンドの実体（実行ファイルのパス）を表示。`$PATH` に含まれるディレクトリから検索。

- **構文**：`which <コマンド名>`

- **例**
  - `which python` → `/opt/anaconda3/bin/python`
  - `which conda` → `/opt/anaconda3/bin/conda`
  - `which ls` → `/bin/ls`

- **補足**
  - `$PATH` にないものは見つからない
  - エイリアスや関数は表示されない（→ `type` 推奨）
  - 複数あっても最初に見つかったもののみ表示

- **使い分け**
  1. すぐ場所を知りたい → `which`
  2. 詳しく知りたい → `type`
  3. スクリプト用 → `command -v`
  4. 全体から探す → `find`

---

### ■ chmodコマンドの使い方（パーミッション変更）

- **書式**：`chmod 数字 ファイル名`

- **例**：`chmod 400 <file>`
  - 所有者に読み取り権限のみを与える

- **数字の意味**
  - 1桁目：所有者
  - 2桁目：グループ
  - 3桁目：その他のユーザー

- **権限の値**
  - `4`：read（読み取り）
  - `2`：write（書き込み）
  - `1`：execute（実行）
  - `0`：権限なし

- **合計で設定**
  - 例：`chmod 777` → 全ユーザーに全権限

---

### ■ SSH接続の基本コマンド

- `ssh -i 鍵ファイル.pem ユーザー名@ホスト名`

- **例**
  - `ssh -i mykey.pem ubuntu@ec2-xx-xx-xx-xx.ap-northeast-1.compute.amazonaws.com`

- **オプション**
  - `-i`：秘密鍵ファイル（.pem）を指定する

- **補足**
  - ホスト名はAWSの場合、Public DNSを使用
  - 初回接続時は `yes` と入力して信頼する

---

### ■ AWSでDocker環境を作る流れ（Ubuntu）

1. EC2インスタンスと秘密鍵（.pem）を作成
2. 鍵ファイルのパーミッション変更
   - `chmod 400 mykey.pem`
3. SSHで接続
   - `ssh -i mykey.pem ubuntu@<EC2のPublic DNS>`
4. Dockerインストール
   - `sudo apt-get update`
   - `sudo apt-get install -y docker.io`
5. Dockerグループに追加（sudoなしで実行可能に）
   - `sudo gpasswd -a ubuntu docker`
6. 反映方法
   - 再ログイン、`newgrp docker`、または再起動
7. 確認：`groups` → `docker` が含まれていればOK

- **補足**：
  - `/var/run/docker.sock` のグループ所有者が `docker`
  - このソケットにアクセスできると `sudo` なしで操作可能になる

---

### ■ docker グループの役割と設定

- **概要**
  - Dockerインストール時に `docker` グループが自動で作られる
  - このグループに入れると `sudo` なしでDockerを使える

- **追加コマンド**
  - `sudo gpasswd -a <ユーザー名> docker`
  - 例：`sudo gpasswd -a $USER docker`

- **反映方法**
  - ログアウト＆再ログイン
  - または `newgrp docker`
  - または再起動

- **確認方法**
  - `groups` → `docker` があればOK

- **補足**
  - `docker.sock` にアクセスできるようになることで `sudo` 不要

- **tarで保存と読み込み**
  - `docker save image:ID > ファイル名.tar`
  - `docker load < ファイル名.tar`

---

### ■ sftp（SSH File Transfer Protocol）

- **概要**
  - SSHを使った安全なファイル転送プロトコル（ポート22）

- **接続方法**
  - `sftp -i <秘密鍵ファイル> <ユーザー名>@<ホスト名>`
  - 例：`sftp -i ~/.ssh/id_rsa ubuntu@192.168.0.10`

- **よく使うコマンド**
  - `put <ローカルパス> [リモートパス]`：アップロード
  - `get <リモートパス> [ローカルパス]`：ダウンロード
  - `cd` / `lcd`：ディレクトリ移動
  - `ls` / `pwd` / `lpwd`：一覧やパス確認
  - `exit` or `quit`：終了

- **補足**
  - `scp`より操作性が高い
  - SSHが有効なら追加設定なしで使えることが多い

---

### ■ Dockerイメージをホストに送る3つの方法

1. **Dockerレジストリを使う（push/pull）**
   - ローカル：`docker push user/image`
   - ホスト　：`docker pull user/image`
   - 特徴　：ネット経由、複数台に配布しやすい
   - 用途　：本番環境、CI/CD、チーム共有

2. **Dockerfileを送ってビルド**
   - ローカル → Dockerfile＋ソースをホストへ送る
   - ホスト　 → `docker build -t image .`
   - 特徴　：環境に合わせて再構築可能
   - 用途　：開発中、小規模な展開

3. **tarで保存して送る（save/load）**
   - ローカル　：`docker save image > image.tar`
   - ホスト側　：`docker load < image.tar`
   - 特徴　：オフライン可、レジストリ不要
   - 用途　：ネットワーク制限環境や単発移行

---

### ■ dfコマンド（ディスク容量の確認）

- `df -h`
  - ディスクの使用状況をGB/MB単位で表示

---

### ■ manコマンド（コマンドの使い方を調べる）

- `man コマンド名`
  - 例：`man df`, `man ssh`
  - マニュアル表示。`q` で終了

---

### ■ ユーザーをUID指定で作成する

- `sudo adduser --uid 1111 aaa`
  - UID（ユーザーID）1111の `aaa` というユーザーを作成する

## 次やること
-a  Udemy_米国AI開発者がゼロから教えるDocker講座_s103〜127

-b  ブログ作成

## 感じたこと
-a  タスクを完了させるのは当たり前で+αやっていく。

-b  田舎の実家に帰って学習しているが、良い環境である。都会に比べて騒音もないし、涼しいし、人も少ないので集中できる。

## 学習時間
-7.25h

